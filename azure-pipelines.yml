trigger:
- main

pool:
  vmImage: windows-latest

variables:
  buildConfiguration: 'Release'

steps:
- powershell: |
    $codeql_runner_url = "https://github.com/github/codeql-action/releases/download/codeql-bundle-20210421/codeql-runner-win.exe"
    $codeql_runner_output_file = "$PSScriptRoot\codeql-runner-win.exe"
    try
    {
        $Response = Invoke-WebRequest -Uri $codeql_runner_url -OutFile $codeql_runner_output_file
        Write-Output $Response
        $StatusCode = $Response.StatusCode
        Write-Output "Download completed successfully"
    }
    catch
    {
        $StatusCode = $_.Exception.Response.StatusCode.value__
        Write-Output $StatusCode
        Write-Output "Download Failed"
    }
  displayName: 'Download CodeQL Runner and Binary'
